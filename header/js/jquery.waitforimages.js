(function(a){a.waitForImages={hasImageProperties:["backgroundImage","listStyleImage","borderImage","borderCornerImage"]};a.expr[":"].uncached=function(c){var b=document.createElement("img");b.src=c.src;return a(c).is('img[src!=""]')&&!b.complete};a.fn.waitForImages=function(d,b,c){if(a.isPlainObject(arguments[0])){b=d.each;c=d.waitForAll;d=d.finished}d=d||a.noop;b=b||a.noop;c=!!c;if(!a.isFunction(d)||!a.isFunction(b)){throw new TypeError("An invalid callback was supplied.")}return this.each(function(){var i=a(this),j=[];if(c){var e=a.waitForImages.hasImageProperties||[],h=/url\((['"]?)(.*?)\1\)/g;i.find("*").each(function(){var k=a(this);if(k.is("img:uncached")){j.push({src:k.attr("src"),element:k[0]})}a.each(e,function(n,o){var l=k.css(o);if(!l){return true}var m;while(m=h.exec(l)){j.push({src:m[2],element:k[0]})}})})}else{i.find("img:uncached").each(function(){j.push({src:this.src,element:this})})}var g=j.length,f=0;if(g==0){d.call(i[0])}a.each(j,function(l,k){var m=new Image;a(m).bind("load error",function(n){f++;b.call(k.element,f,g,n.type=="load");if(f==g){d.call(i[0]);return false}});m.src=k.src})})}})(jQuery);